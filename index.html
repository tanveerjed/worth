<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Worth - Zerodha Login Redirect</title>
</head>
<body>
  <p>Logging you in to Zerodha...</p>
  <script>
    // Wait a bit to ensure page loads, then execute redirect
    setTimeout(function() {
      var params = new URLSearchParams(window.location.search);
      var token = params.get("request_token");
      if (token && token.length > 0) {
        // Encode token to handle special chars, then redirect to app
        var encodedToken = encodeURIComponent(token);
        window.location.href = "worth://zerodha-login?request_token=" + encodedToken;
      } else {
        document.body.innerHTML = "<h2 style='color:red;'>Login failed â€” no token received. <a href='https://kite.zerodha.com'>Try login again</a></h2>";
      }
    }, 500);  // 500ms delay for reliability
  </script>
</body>
</html>
